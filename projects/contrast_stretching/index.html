<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Contrast stretching on satellite data | Pearl Ayem</title> <meta name="author" content="Pearl Ayem"> <meta name="description" content="Skills - python, sklearn, rasterio, TIFF"> <meta name="keywords" content="data-modelling, climate-change, net-zero, esg, sustainability,"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://pearl-ayem.github.io/projects/contrast_stretching/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">Pearl Ayem</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About Me</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Data Science Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Curriculum Vitae</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Contrast stretching on satellite data</h1> <p class="post-description">Skills - python, sklearn, rasterio, TIFF</p> </header> <article> <h1 id="introduction">Introduction</h1> <p>This project was carried out as an experiment to understand contrast stretching on Landsat satellite imagery. Constrast stretching is a normalization technique to enhance the image quality by stretching the range of intesity values. The method allows us to create better images from satellite data captured at high temporal resolutions, but in partially cloud conditions.</p> <h2 id="scene-lc80470262015165lgn02-center-time-is-2015-06-14-190043">Scene: LC80470262015165LGN02 center time is 2015-06-14 19:00:43</h2> <p><br><br></p> <h3 id="1-read-bands-34-and-5-green-red-and-near-ir-and-convert-the-image-to-double-precision-64-bit-floating-point-format">1. Read bands 3,4 and 5 (green, red and near-ir) and convert the image to double-precision (64-bit) floating point format:</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tiff_file</span><span class="o">=</span><span class="nf">list</span><span class="p">(</span><span class="n">data_directory</span><span class="p">.</span><span class="nf">glob</span><span class="p">(</span><span class="sh">"</span><span class="s">*B1.TIF</span><span class="sh">"</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">meta_file</span><span class="o">=</span><span class="nf">list</span><span class="p">(</span><span class="n">data_directory</span><span class="p">.</span><span class="nf">glob</span><span class="p">(</span><span class="sh">"</span><span class="s">*MTL.txt</span><span class="sh">"</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">jpeg_file</span><span class="o">=</span><span class="nf">list</span><span class="p">(</span><span class="n">data_directory</span><span class="p">.</span><span class="nf">glob</span><span class="p">(</span><span class="sh">"</span><span class="s">*T1.jpg</span><span class="sh">"</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">out</span><span class="o">=</span><span class="nf">landsat_metadata</span><span class="p">(</span><span class="n">meta_file</span><span class="p">)</span>
<span class="n">meta_dict</span> <span class="o">=</span> <span class="n">out</span><span class="p">.</span><span class="n">__dict__</span>

<span class="k">with</span> <span class="n">pil_image</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="n">tiff_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">img</span><span class="p">:</span>
    <span class="n">tiff_meta_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">TAGS</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="p">:</span> <span class="n">img</span><span class="p">.</span><span class="n">tag</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">img</span><span class="p">.</span><span class="n">tag</span><span class="p">.</span><span class="nf">keys</span><span class="p">()}</span>
    <span class="n">ch1</span> <span class="o">=</span> <span class="nf">img_as_float</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
    
<span class="n">img_eq</span> <span class="o">=</span> <span class="n">exposure</span><span class="p">.</span><span class="nf">equalize_hist</span><span class="p">(</span><span class="n">ch1</span><span class="p">)</span>  
<span class="n">plt</span><span class="p">.</span><span class="nf">hist</span><span class="p">(</span><span class="n">ch1</span><span class="p">.</span><span class="nf">ravel</span><span class="p">());</span>
</code></pre></div></div> <h3 id="2-draw-histogram-of-intensity-from-the-float-obtained-above">2. Draw histogram of intensity from the float obtained above</h3> <div class="row"> <div class="col-sm"> <figure> <picture> <img src="/assets/img/cs_1_1.png" class="img-fluid z-depth-1" width="auto" height="auto" title="contrast stretching 1" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h3 id="3-creating-plot-of-the-low-contrast-image-and-high-intensity-normalized-image">3. Creating plot of the low contrast image and high intensity normalized image</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plt</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="n">ch1</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="n">img_eq</span><span class="p">[</span><span class="mi">1000</span><span class="p">:</span><span class="mi">4000</span><span class="p">,</span><span class="mi">1500</span><span class="p">:</span><span class="mi">5000</span><span class="p">],</span><span class="n">interpolation</span><span class="o">=</span><span class="sh">"</span><span class="s">nearest</span><span class="sh">"</span><span class="p">);</span>
</code></pre></div></div> <div class="row"> <div class="col-sm"> <figure> <picture> <img src="/assets/img/cs_1_2.png" class="img-fluid z-depth-1" width="auto" height="auto" title="contrast stretching 2" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="row"> <div class="col-sm"> <figure> <picture> <img src="/assets/img/cs_1_3.png" class="img-fluid z-depth-1" width="auto" height="auto" title="contrast stretching 3" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h3 id="4-convert-high-contrast-image-to-map-with-shapefile-for-borders-create-histogram-of-the-new-image-floats">4. Convert high contrast image to map, with shapefile for borders. Create histogram of the new image floats.</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">cartopy</span>
<span class="n">zone</span><span class="o">=</span><span class="n">meta_dict</span><span class="p">[</span><span class="sh">'</span><span class="s">UTM_ZONE</span><span class="sh">'</span><span class="p">]</span>
<span class="n">zone_code</span> <span class="o">=</span> <span class="mi">32633</span>
<span class="c1">#https://epsg.io/32610
</span><span class="n">crs</span> <span class="o">=</span> <span class="n">cartopy</span><span class="p">.</span><span class="n">crs</span><span class="p">.</span><span class="nf">epsg</span><span class="p">(</span><span class="n">zone_code</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">projection</span><span class="sh">'</span><span class="p">:</span> <span class="n">crs</span><span class="p">})</span>
<span class="n">ax</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="n">img_eq</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="sh">'</span><span class="s">lower</span><span class="sh">'</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">],</span> <span class="n">transform</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span> 
          <span class="n">interpolation</span><span class="o">=</span><span class="sh">'</span><span class="s">nearest</span><span class="sh">'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="nf">coastlines</span><span class="p">(</span><span class="n">resolution</span><span class="o">=</span><span class="sh">'</span><span class="s">10m</span><span class="sh">'</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">red</span><span class="sh">'</span><span class="p">,</span><span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="nf">set_extent</span><span class="p">([</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">,</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">],</span><span class="n">crs</span><span class="p">)</span>
</code></pre></div></div> <div class="row"> <div class="col-sm"> <figure> <picture> <img src="/assets/img/cs_1_4.png" class="img-fluid z-depth-1" width="auto" height="auto" title="contrast stretching 4" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="row"> <div class="col-sm"> <figure> <picture> <img src="/assets/img/cs_1_5.png" class="img-fluid z-depth-1" width="auto" height="auto" title="contrast stretching 5" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h3 id="5-plot-comparision-of-image-quality-with-its-histograms">5. Plot comparision of image quality with its histograms</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="kn">import</span> <span class="n">matplotlib</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="kn">from</span> <span class="n">skimage</span> <span class="kn">import</span> <span class="n">data</span><span class="p">,</span> <span class="n">img_as_float</span>
<span class="kn">from</span> <span class="n">skimage</span> <span class="kn">import</span> <span class="n">exposure</span>


<span class="n">matplotlib</span><span class="p">.</span><span class="n">rcParams</span><span class="p">[</span><span class="sh">'</span><span class="s">font.size</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span>


<span class="k">def</span> <span class="nf">plot_img_and_hist</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">256</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Plot an image along with its histogram and cumulative histogram.

    </span><span class="sh">"""</span>
    <span class="n">image</span> <span class="o">=</span> <span class="nf">img_as_float</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="n">ax_img</span><span class="p">,</span> <span class="n">ax_hist</span> <span class="o">=</span> <span class="n">axes</span>
    <span class="n">ax_cdf</span> <span class="o">=</span> <span class="n">ax_hist</span><span class="p">.</span><span class="nf">twinx</span><span class="p">()</span>

    <span class="c1"># Display image
</span>    <span class="n">ax_img</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">plt</span><span class="p">.</span><span class="n">cm</span><span class="p">.</span><span class="n">gray</span><span class="p">)</span>
    <span class="n">ax_img</span><span class="p">.</span><span class="nf">set_axis_off</span><span class="p">()</span>

    <span class="c1"># Display histogram
</span>    <span class="n">ax_hist</span><span class="p">.</span><span class="nf">hist</span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="nf">ravel</span><span class="p">(),</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="sh">'</span><span class="s">step</span><span class="sh">'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">black</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">ax_hist</span><span class="p">.</span><span class="nf">ticklabel_format</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="sh">'</span><span class="s">y</span><span class="sh">'</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="sh">'</span><span class="s">scientific</span><span class="sh">'</span><span class="p">,</span> <span class="n">scilimits</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">ax_hist</span><span class="p">.</span><span class="nf">set_xlabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Pixel intensity</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">ax_hist</span><span class="p">.</span><span class="nf">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">ax_hist</span><span class="p">.</span><span class="nf">set_yticks</span><span class="p">([])</span>

    <span class="c1"># Display cumulative distribution
</span>    <span class="n">img_cdf</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="n">exposure</span><span class="p">.</span><span class="nf">cumulative_distribution</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">bins</span><span class="p">)</span>
    <span class="n">ax_cdf</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">,</span> <span class="n">img_cdf</span><span class="p">,</span> <span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">ax_cdf</span><span class="p">.</span><span class="nf">set_yticks</span><span class="p">([])</span>

    <span class="k">return</span> <span class="n">ax_img</span><span class="p">,</span> <span class="n">ax_hist</span><span class="p">,</span> <span class="n">ax_cdf</span>


<span class="c1"># Load an example image
</span><span class="n">img</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">pil_image</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="n">tiff_file</span><span class="p">))</span>

<span class="c1"># Contrast stretching
</span><span class="n">p2</span><span class="p">,</span> <span class="n">p98</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">percentile</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">98</span><span class="p">))</span>
<span class="n">img_rescale</span> <span class="o">=</span> <span class="n">exposure</span><span class="p">.</span><span class="nf">rescale_intensity</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">in_range</span><span class="o">=</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p98</span><span class="p">))</span>

<span class="c1"># Equalization
</span><span class="n">img_eq</span> <span class="o">=</span> <span class="n">exposure</span><span class="p">.</span><span class="nf">equalize_hist</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

<span class="c1"># Adaptive Equalization
</span><span class="n">img_adapteq</span> <span class="o">=</span> <span class="n">exposure</span><span class="p">.</span><span class="nf">equalize_adapthist</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">clip_limit</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>

<span class="c1"># Display results
</span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">axes</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="p">.</span><span class="nb">object</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="nf">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="nf">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">sharey</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="nf">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>

<span class="n">ax_img</span><span class="p">,</span> <span class="n">ax_hist</span><span class="p">,</span> <span class="n">ax_cdf</span> <span class="o">=</span> <span class="nf">plot_img_and_hist</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">axes</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">ax_img</span><span class="p">.</span><span class="nf">set_title</span><span class="p">(</span><span class="sh">'</span><span class="s">Low contrast image</span><span class="sh">'</span><span class="p">)</span>

<span class="n">y_min</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">=</span> <span class="n">ax_hist</span><span class="p">.</span><span class="nf">get_ylim</span><span class="p">()</span>
<span class="n">ax_hist</span><span class="p">.</span><span class="nf">set_ylabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Number of pixels</span><span class="sh">'</span><span class="p">)</span>
<span class="n">ax_hist</span><span class="p">.</span><span class="nf">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="nf">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y_max</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">ax_img</span><span class="p">,</span> <span class="n">ax_hist</span><span class="p">,</span> <span class="n">ax_cdf</span> <span class="o">=</span> <span class="nf">plot_img_and_hist</span><span class="p">(</span><span class="n">img_rescale</span><span class="p">,</span> <span class="n">axes</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">ax_img</span><span class="p">.</span><span class="nf">set_title</span><span class="p">(</span><span class="sh">'</span><span class="s">Contrast stretching</span><span class="sh">'</span><span class="p">)</span>

<span class="n">ax_img</span><span class="p">,</span> <span class="n">ax_hist</span><span class="p">,</span> <span class="n">ax_cdf</span> <span class="o">=</span> <span class="nf">plot_img_and_hist</span><span class="p">(</span><span class="n">img_eq</span><span class="p">,</span> <span class="n">axes</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">ax_img</span><span class="p">.</span><span class="nf">set_title</span><span class="p">(</span><span class="sh">'</span><span class="s">Histogram equalization</span><span class="sh">'</span><span class="p">)</span>

<span class="n">ax_img</span><span class="p">,</span> <span class="n">ax_hist</span><span class="p">,</span> <span class="n">ax_cdf</span> <span class="o">=</span> <span class="nf">plot_img_and_hist</span><span class="p">(</span><span class="n">img_adapteq</span><span class="p">,</span> <span class="n">axes</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">ax_img</span><span class="p">.</span><span class="nf">set_title</span><span class="p">(</span><span class="sh">'</span><span class="s">Adaptive equalization</span><span class="sh">'</span><span class="p">)</span>

<span class="n">ax_cdf</span><span class="p">.</span><span class="nf">set_ylabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Fraction of total intensity</span><span class="sh">'</span><span class="p">)</span>
<span class="n">ax_cdf</span><span class="p">.</span><span class="nf">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="nf">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="c1"># prevent overlap of y-axis labels
</span><span class="n">fig</span><span class="p">.</span><span class="nf">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div> <div class="row"> <div class="col-sm"> <figure> <picture> <img src="/assets/img/cs_1_6.png" class="img-fluid z-depth-1" width="auto" height="auto" title="contrast stretching vs hist" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Pearl Ayem. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>